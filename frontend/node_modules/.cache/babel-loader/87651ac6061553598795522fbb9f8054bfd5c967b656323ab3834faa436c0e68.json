{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alessandro\\\\Code\\\\web-projects\\\\test-site\\\\Progetto Ingegneria\\\\frontend\\\\src\\\\pages\\\\DettagliModifica.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, gql } from '@apollo/client';\nimport ModificaSingola from '../View/ModificaSingola';\nimport { userData } from '../helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PATTERN = gql`\n  query getPattern($id: ID!) {\n    patternBuffer(id: $id) {\n      data {\n        id\n        attributes {\n          titolo,\n          descrizione,\n          contesto,\n          esempio,\n          strategias {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          },\n          collocazione_mvcs {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          },\n          fase_isos {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          },\n          articolo_gdprs {\n            data {\n              id\n              attributes {\n                nome\n                link\n              }\n            }\n          },\n          principio_pbds {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          },\n          categoria_owasps {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          },\n          cwe_associata_a_categoria_owasps {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          }\n          user {\n            data {\n              id\n              attributes {\n                username\n              }\n            }\n          }\n          stato {\n            data {\n              id\n              attributes {\n                nome\n              }\n            }\n          }\n          pattern {\n            data {\n              id\n              attributes {\n                titolo,\n                descrizione,\n                contesto,\n                esempio,\n                strategias {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                },\n                collocazione_mvcs {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                },\n                fase_isos {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                },\n                articolo_gdprs {\n                  data {\n                    id\n                    attributes {\n                      nome\n                      link\n                    }\n                  }\n                },\n                principio_pbds {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                },\n                categoria_owasps {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                },\n                cwe_associata_a_categoria_owasps {\n                  data {\n                    id\n                    attributes {\n                      nome\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\nexport default function DettagliModifica() {\n  _s();\n  var _pattern$pattern, _pattern$pattern$data;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    data,\n    error,\n    loading\n  } = useQuery(PATTERN, {\n    variables: {\n      id: id\n    }\n  });\n  const [feedback, setFeedback] = useState('');\n  const {\n    jwt\n  } = userData();\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Error: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 21\n  }, this);\n  const pattern = data.patternBuffer.data.attributes;\n  const idPatternAssociato = (_pattern$pattern = pattern.pattern) === null || _pattern$pattern === void 0 ? void 0 : (_pattern$pattern$data = _pattern$pattern.data) === null || _pattern$pattern$data === void 0 ? void 0 : _pattern$pattern$data.id;\n  const stato = pattern.stato.data.attributes.nome;\n  const handlePut = async () => {\n    const urlPattern = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\n    const body = {\n      data: {\n        titolo: pattern.titolo,\n        descrizione: pattern.descrizione,\n        contesto: pattern.contesto,\n        esempio: pattern.esempio,\n        strategias: pattern.strategias.data.map(el => el.id),\n        collocazione_mvcs: pattern.collocazione_mvcs.data.map(el => el.id),\n        fase_isos: pattern.fase_isos.data.map(el => el.id),\n        articolo_gdprs: pattern.articolo_gdprs.data.map(el => el.id),\n        principio_pbds: pattern.principio_pbds.data.map(el => el.id),\n        categoria_owasps: pattern.categoria_owasps.data.map(el => el.id),\n        cwe_associata_a_categoria_owasps: pattern.cwe_associata_a_categoria_owasps.data.map(el => el.id),\n        user: pattern.user.data.id\n      }\n    };\n    try {\n      const response = await fetch(urlPattern, {\n        method: 'PUT',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        },\n        body: JSON.stringify(body)\n      });\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseDelete = await fetch(urlDelete, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        }\n      });\n      if (!responseDelete.ok) {\n        throw new Error('Network response was not ok');\n      }\n      setFeedback('Pattern aggiornato e buffer eliminato con successo!');\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\n    } catch (error) {\n      setFeedback(`Errore nell'aggiornamento del pattern: ${error.message}`);\n    }\n  };\n  const handlePost = async () => {\n    const urlPattern = `http://localhost:1337/api/patterns`;\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\n    const body = {\n      data: {\n        titolo: pattern.titolo,\n        descrizione: pattern.descrizione,\n        contesto: pattern.contesto,\n        esempio: pattern.esempio,\n        strategias: pattern.strategias.data.map(el => el.id),\n        collocazione_mvcs: pattern.collocazione_mvcs.data.map(el => el.id),\n        fase_isos: pattern.fase_isos.data.map(el => el.id),\n        articolo_gdprs: pattern.articolo_gdprs.data.map(el => el.id),\n        principio_pbds: pattern.principio_pbds.data.map(el => el.id),\n        categoria_owasps: pattern.categoria_owasps.data.map(el => el.id),\n        cwe_associata_a_categoria_owasps: pattern.cwe_associata_a_categoria_owasps.data.map(el => el.id),\n        user: pattern.user.data.id\n      }\n    };\n    try {\n      const response = await fetch(urlPattern, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        },\n        body: JSON.stringify(body)\n      });\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseDelete = await fetch(urlDelete, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        }\n      });\n      if (!responseDelete.ok) {\n        throw new Error('Network response was not ok');\n      }\n      setFeedback('Pattern aggiunto e buffer eliminato con successo!');\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\n    } catch (error) {\n      setFeedback(`Errore nell'aggiunta del pattern: ${error.message}`);\n    }\n  };\n  const handleDeletePatternAssociato = async () => {\n    const urlDeletePattern = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\n    const urlDeleteBuffer = `http://localhost:1337/api/pattern-buffers/${id}`;\n    try {\n      const responseDeletePattern = await fetch(urlDeletePattern, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        }\n      });\n      if (!responseDeletePattern.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseDeleteBuffer = await fetch(urlDeleteBuffer, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        }\n      });\n      if (!responseDeleteBuffer.ok) {\n        throw new Error('Network response was not ok');\n      }\n      setFeedback('Pattern associato eliminato e buffer eliminato con successo!');\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\n    } catch (error) {\n      setFeedback(`Errore nell'eliminazione del pattern associato: ${error.message}`);\n    }\n  };\n  const handleDelete = async () => {\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\n    const urlResetPatternPendingDelete = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\n    try {\n      const responseDelete = await fetch(urlDelete, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        }\n      });\n      if (!responseDelete.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const responseReset = await fetch(urlResetPatternPendingDelete, {\n        method: 'PUT',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + jwt\n        },\n        body: JSON.stringify({\n          data: {\n            pending_delete: false\n          }\n        })\n      });\n      if (!responseReset.ok) {\n        throw new Error('Error updating pattern');\n      }\n      setFeedback('Pattern buffer eliminato con successo!');\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\n    } catch (error) {\n      setFeedback(`Errore nell'eliminazione del pattern buffer: ${error.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ModificaSingola, {\n      id: id,\n      pattern: pattern\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this), stato === 'Modifica' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-modifica\",\n        onClick: handlePut,\n        children: \"Conferma richiesta di modifica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-modifica\",\n        onClick: handleDelete,\n        children: \"Respingi richiesta di modifica\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), stato === 'Aggiungi' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-aggiungi\",\n        onClick: handlePost,\n        children: \"Conferma richiesta di aggiunta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-aggiungi\",\n        onClick: handleDelete,\n        children: \"Respingi richiesta di aggiunta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 9\n    }, this), stato === 'Elimina' && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-elimina\",\n        onClick: handleDeletePatternAssociato,\n        children: \"Conferma richiesta di eliminazione\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-elimina\",\n        onClick: handleDelete,\n        children: \"Respingi richiesta di eliminazione\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 9\n    }, this), feedback && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: feedback\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 20\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 370,\n    columnNumber: 5\n  }, this);\n}\n_s(DettagliModifica, \"j+9q9GEujHYYUPUZ3kmtKvR71l4=\", false, function () {\n  return [useParams, useNavigate, useQuery];\n});\n_c = DettagliModifica;\nvar _c;\n$RefreshReg$(_c, \"DettagliModifica\");","map":{"version":3,"names":["React","useState","useParams","useNavigate","useQuery","gql","ModificaSingola","userData","jsxDEV","_jsxDEV","PATTERN","DettagliModifica","_s","_pattern$pattern","_pattern$pattern$data","id","navigate","data","error","loading","variables","feedback","setFeedback","jwt","children","fileName","_jsxFileName","lineNumber","columnNumber","message","pattern","patternBuffer","attributes","idPatternAssociato","stato","nome","handlePut","urlPattern","urlDelete","body","titolo","descrizione","contesto","esempio","strategias","map","el","collocazione_mvcs","fase_isos","articolo_gdprs","principio_pbds","categoria_owasps","cwe_associata_a_categoria_owasps","user","response","fetch","method","headers","Accept","JSON","stringify","ok","Error","responseDelete","handlePost","handleDeletePatternAssociato","urlDeletePattern","urlDeleteBuffer","responseDeletePattern","responseDeleteBuffer","handleDelete","urlResetPatternPendingDelete","responseReset","pending_delete","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Alessandro/Code/web-projects/test-site/Progetto Ingegneria/frontend/src/pages/DettagliModifica.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useQuery, gql } from '@apollo/client';\r\nimport ModificaSingola from '../View/ModificaSingola';\r\nimport { userData } from '../helpers';\r\n\r\nconst PATTERN = gql`\r\n  query getPattern($id: ID!) {\r\n    patternBuffer(id: $id) {\r\n      data {\r\n        id\r\n        attributes {\r\n          titolo,\r\n          descrizione,\r\n          contesto,\r\n          esempio,\r\n          strategias {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          },\r\n          collocazione_mvcs {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          },\r\n          fase_isos {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          },\r\n          articolo_gdprs {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n                link\r\n              }\r\n            }\r\n          },\r\n          principio_pbds {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          },\r\n          categoria_owasps {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          },\r\n          cwe_associata_a_categoria_owasps {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          }\r\n          user {\r\n            data {\r\n              id\r\n              attributes {\r\n                username\r\n              }\r\n            }\r\n          }\r\n          stato {\r\n            data {\r\n              id\r\n              attributes {\r\n                nome\r\n              }\r\n            }\r\n          }\r\n          pattern {\r\n            data {\r\n              id\r\n              attributes {\r\n                titolo,\r\n                descrizione,\r\n                contesto,\r\n                esempio,\r\n                strategias {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                },\r\n                collocazione_mvcs {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                },\r\n                fase_isos {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                },\r\n                articolo_gdprs {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                      link\r\n                    }\r\n                  }\r\n                },\r\n                principio_pbds {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                },\r\n                categoria_owasps {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                },\r\n                cwe_associata_a_categoria_owasps {\r\n                  data {\r\n                    id\r\n                    attributes {\r\n                      nome\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function DettagliModifica() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { data, error, loading } = useQuery(PATTERN, {\r\n    variables: { id: id }\r\n  });\r\n  const [feedback, setFeedback] = useState('');\r\n  const { jwt } = userData();\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error: {error.message}</p>;\r\n\r\n  const pattern = data.patternBuffer.data.attributes;\r\n  const idPatternAssociato = pattern.pattern?.data?.id;\r\n  const stato = pattern.stato.data.attributes.nome;\r\n\r\n  const handlePut = async () => {\r\n    const urlPattern = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\r\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\r\n    const body = {\r\n      data: {\r\n        titolo: pattern.titolo,\r\n        descrizione: pattern.descrizione,\r\n        contesto: pattern.contesto,\r\n        esempio: pattern.esempio,\r\n        strategias: pattern.strategias.data.map(el => el.id),\r\n        collocazione_mvcs: pattern.collocazione_mvcs.data.map(el => el.id),\r\n        fase_isos: pattern.fase_isos.data.map(el => el.id),\r\n        articolo_gdprs: pattern.articolo_gdprs.data.map(el => el.id),\r\n        principio_pbds: pattern.principio_pbds.data.map(el => el.id),\r\n        categoria_owasps: pattern.categoria_owasps.data.map(el => el.id),\r\n        cwe_associata_a_categoria_owasps: pattern.cwe_associata_a_categoria_owasps.data.map(el => el.id),\r\n        user: pattern.user.data.id\r\n      }\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(urlPattern, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      const responseDelete = await fetch(urlDelete, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        }\r\n      });\r\n\r\n      if (!responseDelete.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      setFeedback('Pattern aggiornato e buffer eliminato con successo!');\r\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\r\n    } catch (error) {\r\n      setFeedback(`Errore nell'aggiornamento del pattern: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handlePost = async () => {\r\n    const urlPattern = `http://localhost:1337/api/patterns`;\r\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\r\n    const body = {\r\n      data: {\r\n        titolo: pattern.titolo,\r\n        descrizione: pattern.descrizione,\r\n        contesto: pattern.contesto,\r\n        esempio: pattern.esempio,\r\n        strategias: pattern.strategias.data.map(el => el.id),\r\n        collocazione_mvcs: pattern.collocazione_mvcs.data.map(el => el.id),\r\n        fase_isos: pattern.fase_isos.data.map(el => el.id),\r\n        articolo_gdprs: pattern.articolo_gdprs.data.map(el => el.id),\r\n        principio_pbds: pattern.principio_pbds.data.map(el => el.id),\r\n        categoria_owasps: pattern.categoria_owasps.data.map(el => el.id),\r\n        cwe_associata_a_categoria_owasps: pattern.cwe_associata_a_categoria_owasps.data.map(el => el.id),\r\n        user: pattern.user.data.id\r\n      }\r\n    };\r\n\r\n    try {\r\n      const response = await fetch(urlPattern, {\r\n        method: 'POST',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      const responseDelete = await fetch(urlDelete, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        }\r\n      });\r\n\r\n      if (!responseDelete.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      setFeedback('Pattern aggiunto e buffer eliminato con successo!');\r\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\r\n    } catch (error) {\r\n      setFeedback(`Errore nell'aggiunta del pattern: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDeletePatternAssociato = async () => {\r\n    const urlDeletePattern = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\r\n    const urlDeleteBuffer = `http://localhost:1337/api/pattern-buffers/${id}`;\r\n\r\n    try {\r\n      const responseDeletePattern = await fetch(urlDeletePattern, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        }\r\n      });\r\n\r\n      if (!responseDeletePattern.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      const responseDeleteBuffer = await fetch(urlDeleteBuffer, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        }\r\n      });\r\n\r\n      if (!responseDeleteBuffer.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      setFeedback('Pattern associato eliminato e buffer eliminato con successo!');\r\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\r\n    } catch (error) {\r\n      setFeedback(`Errore nell'eliminazione del pattern associato: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const urlDelete = `http://localhost:1337/api/pattern-buffers/${id}`;\r\n    const urlResetPatternPendingDelete = `http://localhost:1337/api/patterns/${idPatternAssociato}`;\r\n\r\n    try {\r\n      const responseDelete = await fetch(urlDelete, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        }\r\n      });\r\n\r\n      if (!responseDelete.ok) {\r\n        throw new Error('Network response was not ok');\r\n      }\r\n\r\n      const responseReset = await fetch(urlResetPatternPendingDelete, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + jwt\r\n        },\r\n        body: JSON.stringify({\r\n          data: { pending_delete: false }\r\n        })\r\n      });\r\n\r\n      if (!responseReset.ok) {\r\n        throw new Error('Error updating pattern');\r\n      }\r\n\r\n      setFeedback('Pattern buffer eliminato con successo!');\r\n      navigate('/amministratore/modifiche-pkb'); // Torna alla pagina precedente\r\n    } catch (error) {\r\n      setFeedback(`Errore nell'eliminazione del pattern buffer: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ModificaSingola id={id} pattern={pattern} />\r\n      {stato === 'Modifica' && (\r\n        <div>\r\n          <button className='button-modifica' onClick={handlePut}>Conferma richiesta di modifica</button>\r\n          <button className='button-modifica' onClick={handleDelete}>Respingi richiesta di modifica</button>\r\n        </div>\r\n      )}\r\n      {stato === 'Aggiungi' && (\r\n        <div>\r\n          <button className='button-aggiungi' onClick={handlePost}>Conferma richiesta di aggiunta</button>\r\n          <button className='button-aggiungi' onClick={handleDelete}>Respingi richiesta di aggiunta</button>\r\n        </div>\r\n      )}\r\n      {stato === 'Elimina' && (\r\n        <div>\r\n          <button className='button-elimina' onClick={handleDeletePatternAssociato}>Conferma richiesta di eliminazione</button>\r\n          <button className='button-elimina' onClick={handleDelete}>Respingi richiesta di eliminazione</button>\r\n        </div>\r\n      )}\r\n      {feedback && <p>{feedback}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,QAAQ,EAAEC,GAAG,QAAQ,gBAAgB;AAC9C,OAAOC,eAAe,MAAM,yBAAyB;AACrD,SAASC,QAAQ,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,OAAO,GAAGL,GAAG;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,eAAe,SAASM,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,gBAAA,EAAAC,qBAAA;EACzC,MAAM;IAAEC;EAAG,CAAC,GAAGb,SAAS,CAAC,CAAC;EAC1B,MAAMc,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEc,IAAI;IAAEC,K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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}